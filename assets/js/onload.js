let cacheName="i18n-cache-v1",languageFiles={en:"./assets/lang/en.json",zh:"./assets/lang/zh.json"};function cacheLanguageFiles(){"caches"in window&&caches.open(cacheName).then(cache=>{Object.values(languageFiles).forEach(file=>{cache.add(file).catch(err=>{console.error(`Failed to cache ${file}: `,err)})})})}function loadLanguage(lang){document.documentElement.setAttribute("lang",lang);let url=languageFiles[lang];"caches"in window?caches.match(url).then(async response=>{if(response)return response.json();{let response_1=await fetch(url);return await caches.open(cacheName).then(cache=>cache.put(url,response_1.clone())),response_1.json()}}).then(data=>{updatePageWithLanguageData(data),localStorage.setItem("preferredLanguage",lang),updateLanguageSwitcher(lang)}).catch(error=>{console.error("Error loading language data: ",error)}):fetch(url).then(response=>response.json()).then(data=>{updatePageWithLanguageData(data),localStorage.setItem("preferredLanguage",lang),updateLanguageSwitcher(lang)})}function updateLanguageSwitcher(lang){document.getElementById("zh"===lang?"chn-btn":"eng-btn").setAttribute("checked","checked")}import{updateFromId,updateFromName}from"./script.js";function updatePageWithLanguageData(data){updateFromId(),updateFromName(),document.getElementById("input-pid").placeholder=data.prob_id.input,document.getElementById("submit-pid").innerHTML=data.prob_id.btn,document.getElementById("input-pna").placeholder=data.prob_name.input,document.getElementById("submit-pna").innerHTML=data.prob_name.btn,document.getElementById("github").innerHTML=data.settings.github,document.getElementById("sponsor").innerHTML=data.settings.sponsor,document.getElementById("system-scheme").ariaLabel=data.settings.auto,document.getElementById("light-scheme").ariaLabel=data.settings.light,document.getElementById("dark-scheme").ariaLabel=data.settings.dark}function initLanguage(){loadLanguage(localStorage.getItem("preferredLanguage")||"zh")}document.getElementById("chn-btn").addEventListener("click",()=>loadLanguage("zh")),document.getElementById("eng-btn").addEventListener("click",()=>loadLanguage("en")),window.onload=()=>(initLanguage(),cacheLanguageFiles());let words=["???","css","git","svg","time","code","love","rage","bugs","html","json","music","ideas","faith","atoms","magic","humor","colors","regret","coffee","dreams","hatred","vscode","node.js","science","buttons","respect","madness","quality","daisyUI","morality","devotion","tailwind","stupidity","sacrilege","dark mode","intensity","community","simplicity","dedication","randomness","javascript","efficiency","melancholy","[REDACTED]","intelligence","carelessness"];document.getElementById("the-word").innerHTML=words[Math.floor(Math.random()*words.length)],document.addEventListener("DOMContentLoaded",function(){var themeButtons=document.querySelectorAll(".theme");function applyTheme(theme){"light"===theme?document.documentElement.setAttribute("data-theme","light"):"dark"===theme?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme")}function loadIconColor(){var favicon=document.querySelector("link[rel='icon']");window.matchMedia("(prefers-color-scheme: dark)").matches?favicon?.setAttribute("href","./assets/resources/icon-dark.svg"):favicon?.setAttribute("href","./assets/resources/icon.svg")}function handleSystemThemeChange(){"default"===(localStorage.getItem("theme")||"default")&&(loadIconColor(),applyTheme("default"))}let savedTheme=localStorage.getItem("theme")||"default";applyTheme(savedTheme),themeButtons.forEach(button=>{button.value===savedTheme&&(button.checked=!0),button.addEventListener("change",()=>{var selectedTheme=button.value;applyTheme(selectedTheme),localStorage.setItem("theme",selectedTheme)})}),loadIconColor(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",handleSystemThemeChange),window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",handleSystemThemeChange)});