let inputPid=document.getElementById("input-pid"),inputPna=document.getElementById("input-pna"),submitPid=document.getElementById("submit-pid"),submitPna=document.getElementById("submit-pna"),selectPid=document.getElementById("select-pid"),selectPna=document.getElementById("select-pna"),catchPhraseHash="816280b1928a963b53a78bfe4aea8275a07972b0bc9dd05e65448e3a57cb8ae1";async function sha256(message){message=(new TextEncoder).encode(message),message=await crypto.subtle.digest("SHA-256",message);return Array.from(new Uint8Array(message)).map(b=>b.toString(16).padStart(2,"0")).join("")}let probIdRule={lg:/^[BP]?\d{4,5}$/,lib:/^[#]?\d{1,5}$/,cf:/^(\d{1,4})([a-zA-Z])([1-9]?)$/,uoj:/^[#]?\d{1,3}$/,pku:/^[#]?\d{4}$/,hdu:/^[#]?\d{4}$/,bz:/^[P]?\d{3,5}$/,vj:/^\S+-\S+$/,at:/^\S+_\S+$/};function concatenateFromId(jdg,txt){if("lg"===jdg){let baseUrl="https://www.luogu.com.cn/problem/";return"P"!==txt[0]&&"B"!==txt[0]&&(baseUrl+="P"),baseUrl+txt}var match;if("lib"===jdg)return"https://loj.ac/p/"+("#"===txt[0]?txt.substring(1):txt);if("cf"===jdg)return(match=probIdRule.cf.exec(txt))[3]?`https://codeforces.com/problemset/problem/${match[1]}/`+match[2]+match[3]:`https://codeforces.com/problemset/problem/${match[1]}/`+match[2];if("uoj"===jdg){let probId="#"===txt[0]?txt.substring(1):txt;return"https://uoj.ac/problem/"+probId}if("bz"!==jdg)return"pku"===jdg?"http://poj.org/problem?id="+txt:"hdu"===jdg?"https://acm.hdu.edu.cn/showproblem.php?pid="+txt:"vj"===jdg?"https://vjudge.net/problem/"+txt:"at"===jdg?"https://www.luogu.com.cn/remoteJudgeRedirect/atcoder/"+txt:"sp"===jdg?`https://www.spoj.com/problems/${txt}/`:"dm"===jdg?"https://dmoj.ca/problem/"+txt:"#";{let baseUrl="https://new.bzoj.org:88/p/";return"P"!==txt[0]&&(baseUrl+="P"),baseUrl+txt}}function concatenateFromName(jdg,txt){var lang;return"lg"===jdg?`https://www.luogu.com.cn/problem/list?keyword=${txt}&type=B|P&page=1`:"lib"===jdg?"https://loj.ac/p?keyword="+txt:"bz"===jdg?"https://new.bzoj.org:88/p?q="+txt:"acw"===jdg?"https://www.acwing.com/problem/search/1/?search_content="+txt:"dm"===jdg?"https://dmoj.ca/problems/?search="+txt:"uoj"===jdg?"https://uoj.ac/problems?search="+txt:(lang=document.documentElement.lang,"cf"===jdg?`https://www.${"zh"===lang?"bing":"google"}.com/search?q=${txt}+site%3Acodeforces.com`:"at"===jdg?`https://www.${"zh"===lang?"bing":"google"}.com/search?q=${txt}+site%3Aatcoder.jp`:"#")}async function updateFromId(){var re,text=inputPid.value;text?(re=selectPid.value in probIdRule?probIdRule[selectPid.value]:/\S*/,await sha256(text)===catchPhraseHash?(inputPid.classList.remove("input-error"),submitPid.classList.add("btn-active"),submitPid.classList.remove("btn-disabled"),submitPid.setAttribute("tabindex","0"),submitPid.setAttribute("target","_blank"),"zh"===document.documentElement.lang?submitPid.setAttribute("href","https://www.bilibili.com/video/BV1GJ411x7h7"):submitPid.setAttribute("href","https://www.youtube.com/watch?v=dQw4w9WgXcQ")):re.test(text)?(inputPid.classList.remove("input-error"),submitPid.classList.add("btn-active"),submitPid.classList.remove("btn-disabled"),submitPid.setAttribute("tabindex","0"),submitPid.setAttribute("target","_blank"),submitPid.setAttribute("href",concatenateFromId(selectPid.value,text))):(inputPid.classList.add("input-error"),submitPid.classList.add("btn-disabled"),submitPid.classList.remove("btn-active"),submitPid.setAttribute("tabindex","-1"),submitPid.setAttribute("target","_self"),submitPid.setAttribute("href","#"))):(inputPid.classList.remove("input-error"),submitPid.classList.add("btn-disabled"),submitPid.classList.remove("btn-active"),submitPid.setAttribute("tabindex","-1"),submitPid.setAttribute("target","_self"),submitPid.setAttribute("href","#"))}async function updateFromName(){var text=inputPna.value;text?(submitPna.classList.add("btn-active"),submitPna.classList.remove("btn-disabled"),submitPna.setAttribute("tabindex","0"),submitPna.setAttribute("target","_blank"),submitPna.setAttribute("href",concatenateFromName(selectPna.value,text))):(submitPna.classList.add("btn-disabled"),submitPna.classList.remove("btn-active"),submitPna.setAttribute("tabindex","-1"),submitPna.setAttribute("target","_self"),submitPna.setAttribute("href","#"))}inputPid.addEventListener("keydown",event=>"Enter"===event.key&&submitPid.click()),inputPid.addEventListener("input",()=>updateFromId()),selectPid.addEventListener("change",()=>updateFromId()),inputPna.addEventListener("keydown",event=>"Enter"===event.key&&submitPna.click()),inputPna.addEventListener("input",()=>updateFromName()),selectPna.addEventListener("change",()=>updateFromName());export{updateFromId,updateFromName};